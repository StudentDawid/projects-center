# Raport Strategiczny: Analiza Rynku Gier Typu Idle/Incremental oraz Dokumentacja Projektowa Systemu "Echa Aterii"

## Streszczenie Wykonawcze

Niniejszy raport stanowi kompleksowe studium analityczno-projektowe, opracowane w odpowiedzi na zapotrzebowanie dotyczÄ…ce identyfikacji kluczowych czynnikÃ³w sukcesu w sektorze gier przyrostowych (ang. idle/incremental games) na lata 2024â€“2025. Dokument Å‚Ä…czy w sobie szczegÃ³Å‚owÄ… analizÄ™ trendÃ³w rynkowych, psychologii behawioralnej graczy oraz inÅ¼ynierii systemÃ³w ekonomicznych, w celu sformuÅ‚owania kompletnego planu produkcyjnego dla nowatorskiego tytuÅ‚u osadzonego w realiach fantasy: "Echa Aterii".

CentralnÄ… tezÄ… projektu jest odejÅ›cie od liniowego rozwoju na rzecz trÃ³jpodziaÅ‚u Å›cieÅ¼ek progresji â€“ Wojownika, Naukowca i Handlarza â€“ ktÃ³re, choÄ‡ odrÄ™bne, pozostajÄ… w Å›cisÅ‚ej symbiozie mechanicznej (ang. interdependency loop). Analiza opiera siÄ™ na dekonstrukcji rynkowych liderÃ³w, takich jak Melvor Idle, Magic Research 2, Tiny Shop czy Realm Grinder, wyodrÄ™bniajÄ…c mechanizmy odpowiedzialne za ich wysokÄ… retencjÄ™ i sukces komercyjny.

---

## CzÄ™Å›Ä‡ I: Krajobraz Rynku Gier IDLE (2024â€“2025)

### 1.1. Ewolucja Gatunku: Od "ClickerÃ³w" do Symulacji Systemowych

Gatunek gier przyrostowych przeszedÅ‚ fundamentalnÄ… transformacjÄ™. Pierwotne formy, tzw. "clickery", opierajÄ…ce siÄ™ na manualnej interakcji w celu generowania waluty, ustÄ…piÅ‚y miejsca zaawansowanym symulatorom zarzÄ…dzania zasobami. W latach 2024â€“2025 obserwujemy dominacjÄ™ podgatunku Unfolding Games â€“ gier, ktÃ³re poczÄ…tkowo prezentujÄ… siÄ™ jako proste systemy, by wraz z postÄ™pem odsÅ‚aniaÄ‡ przed graczem skomplikowane warstwy mechaniczne, nowe zasoby i paradygmaty rozgrywki.

WspÃ³Å‚czesny gracz gatunku idle nie szuka bezmyÅ›lnego klikania. Poszukuje on optymalizacji, matematycznej gÅ‚Ä™bi oraz poczucia staÅ‚ego, wymiernego postÄ™pu, ktÃ³ry szanuje jego czas. TytuÅ‚y takie jak Unnamed Space Idle, Magic Research 2 czy (the) Gnorp Apologue zdobywajÄ… uznanie spoÅ‚ecznoÅ›ci nie dziÄ™ki grafice, lecz dziÄ™ki satysfakcjonujÄ…cym pÄ™tlom sprzÄ™Å¼enia zwrotnego i innowacyjnemu podejÅ›ciu do automatyzacji.

#### Tabela 1.1: Typologia wspÃ³Å‚czesnych gier IDLE

| Podgatunek | Charakterystyka | PrzykÅ‚ady Rynkowe | Kluczowy Czynnik Sukcesu |
|------------|-----------------|-------------------|--------------------------|
| Idle RPG | Symulacja rozwoju postaci, statystyk i ekwipunku bez manualnej walki. CzÄ™sto inspirowane MMORPG. | Melvor Idle, Idle Clans, Nordicandia | Poczucie progresji toÅ¼same z MMO, ale bez koniecznoÅ›ci grindu ("Number go up"). |
| Unfolding Strategy | Stopniowe odkrywanie nowych mechanik, ktÃ³re zmieniajÄ… zasady gry. | Magic Research 2, Paperclip, Candy Box | CiekawoÅ›Ä‡ poznawcza ("Co odblokujÄ™ dalej?") i zmiana paradygmatu. |
| Resource Management | Skupienie na Å‚aÅ„cuchach produkcyjnych i logistyce. | Idle Research, Factory Idle | Satysfakcja z optymalizacji ("Efficiency puzzle"). |
| Narrative Idle | Mechanika idle sÅ‚uÅ¼y do popychania naprzÃ³d fabuÅ‚y. | (the) Gnorp Apologue, Home Quest | PoÅ‚Ä…czenie historii z mechanikÄ… przyrostowÄ…. |

### 1.2. Analiza LiderÃ³w Rynku: Dekonstrukcja Sukcesu

Aby zaprojektowaÄ‡ skutecznÄ… grÄ™, naleÅ¼y zrozumieÄ‡, dlaczego obecni liderzy dominujÄ… na listach przebojÃ³w platform takich jak Steam, iOS i Android.

#### 1.2.1. Fenomen Melvor Idle: RuneScape bez Grindu

Melvor Idle jest absolutnym punktem odniesienia dla projektowanego systemu "Ech Aterii". Jego sukces komercyjny i artystyczny opiera siÄ™ na kilku filarach:

- **Nostalgia i DostÄ™pnoÅ›Ä‡**: Gra jest wprost inspirowana RuneScape, co przyciÄ…ga weteranÃ³w gatunku MMORPG, ktÃ³rzy dorosÅ‚ym Å¼yciu nie majÄ… czasu na wielogodzinny grind. Melvor kondensuje te doÅ›wiadczenia w formÄ™ "bite-sized moments".

- **Ekstremalna InterzaleÅ¼noÅ›Ä‡ (Interdependency)**: Å»adna umiejÄ™tnoÅ›Ä‡ nie istnieje w prÃ³Å¼ni. GÃ³rnictwo (Mining) jest niezbÄ™dne dla Kowalstwa (Smithing), ktÃ³re jest niezbÄ™dne dla Walki (Combat). Walka dostarcza nasion dla Rolnictwa (Farming), ktÃ³re produkuje Å¼ywnoÅ›Ä‡ niezbÄ™dnÄ… do leczenia w Walce. Ta zamkniÄ™ta pÄ™tla sprawia, Å¼e kaÅ¼da akcja gracza ma znaczenie dla caÅ‚oÅ›ci systemu.

- **Model Biznesowy**: Gra odniosÅ‚a sukces jako tytuÅ‚ Premium (lub z jednorazowym odblokowaniem), co buduje zaufanie w opozycji do agresywnych gier F2P.

#### 1.2.2. Magic Research 2: Innowacja w Strukturze KoÅ„ca

W przeciwieÅ„stwie do nieskoÅ„czonych gier idle, Magic Research 2 wprowadza wyraÅºny cel narracyjny i mechaniczny (ukoÅ„czenie Turnieju/FabuÅ‚y).

- **Boss Walls (Åšciany TrudnoÅ›ci)**: Gra wykorzystuje bossÃ³w jako "bramki" sprawdzajÄ…ce optymalizacjÄ™ gracza. Wymaga to nie tylko czekania na surowce, ale aktywnej zmiany strategii (np. zmiana Å¼ywioÅ‚u, dobÃ³r innego ekwipunku).

- **Emerytura (Retirement)**: System prestiÅ¼u jest tu fabularnie uzasadniony jako "Emerytura" dyrektora szkoÅ‚y magii. KaÅ¼de podejÅ›cie (run) jest krÃ³tsze i bardziej skondensowane dziÄ™ki bonusom, co niweluje uczucie straty postÄ™pu.

#### 1.2.3. Tiny Shop i Merchant RPG: Ekonomia jako Rozrywka

Gry te udowadniajÄ…, Å¼e handel moÅ¼e byÄ‡ gÅ‚Ã³wnÄ… osiÄ… rozgrywki.

- **Symulacja Handlu**: W Merchant RPG gracz zarzÄ…dza bohaterami (wojownikami), ale jego gÅ‚Ã³wnÄ… rolÄ… jest rola rzemieÅ›lnika i kupca. To odwrÃ³cenie rÃ³l (bohaterowie jako pracownicy) jest kluczowe dla naszej Å›cieÅ¼ki Handlarza.

- **Personalizacja**: Tiny Shop dodaje warstwÄ™ wizualnÄ… (dekorowanie sklepu), co przyciÄ…ga graczy "cozy games". Mechanika pociÄ…gÃ³w handlowych (Trade Routes) pozwala na wymianÄ™ nadmiarowych surowcÃ³w na rzadkie dobra, rozwiÄ…zujÄ…c problem inflacji zasobÃ³w.

### 1.3. Psychologia Gracza IDLE: Dlaczego gramy?

Zrozumienie motywacji gracza jest kluczowe dla projektu. Badania wskazujÄ… na trzy gÅ‚Ã³wne drivery:

1. **Poczucie Kompetencji i Optymalizacji**: Gracze czerpiÄ… satysfakcjÄ™ z doprowadzania systemÃ³w do perfekcji. Widok rosnÄ…cych liczb (DPS, Gold/Sec) jest bezpoÅ›rednim potwierdzeniem ich umiejÄ™tnoÅ›ci analitycznych.

2. **Efekt Zeigarnik i Powroty**: Gry idle wykorzystujÄ… mechanizm zadaÅ„ niedokoÅ„czonych. ÅšwiadomoÅ›Ä‡, Å¼e gra "pracuje" w tle (offline progress), tworzy pÄ™tlÄ™ ciekawoÅ›ci ("Ile zarobiÅ‚em przez noc?"), ktÃ³ra motywuje do powrotu.

3. **Odkrywanie (Discovery)**: Nowoczesne gry idle (unfolding) dozujÄ… mechaniki. Gracz nie widzi caÅ‚ego interfejsu od razu. Odblokowanie nowej zakÅ‚adki (np. "Alchemia") jest nagrodÄ… samÄ… w sobie.

---

## CzÄ™Å›Ä‡ II: Dokumentacja Projektowa (GDD) â€“ "Echa Aterii"

**TytuÅ‚ Roboczy**: Echa Aterii: Gildia Trzech ÅšcieÅ¼ek  
**Gatunek**: Hybrid Idle RPG / Management Sim  
**Platforma Docelowa**: Web (PWA) â†’ PC (Steam via Electron/Tauri) â†’ Mobile (Capacitor/PWA)  
**Stack Technologiczny**: Vue 3, Nuxt.js, Vuetify, TypeScript, Pinia

### 2.1. Wizja Artystyczna i Åšwiat Gry

Åšwiat Aterii to kraina "post-magicznego" renesansu. Po wielkim kataklizmie, ktÃ³ry zniszczyÅ‚ stare imperia, ludzkoÅ›Ä‡ odbudowuje siÄ™ w oparciu o resztki staroÅ¼ytnej technologii i magii. Gracz nie jest pojedynczym bohaterem, lecz Mistrzem Gildii, ktÃ³rego zadaniem jest koordynacja trzech filarÃ³w odbudowy: Militarnego (Wojownik), Naukowego (Naukowiec) i Ekonomicznego (Handlarz).

**Styl Artystyczny**: High-Fidelity Pixel Art.

WybÃ³r ten jest podyktowany analizÄ… trendÃ³w mobilnych na rok 2025. Pixel art oferuje czytelnoÅ›Ä‡ na maÅ‚ych ekranach, niskie zuÅ¼ycie baterii oraz silny Å‚adunek nostalgiczny, ktÃ³ry rezonuje z grupÄ… docelowÄ… (25-40 lat). Interfejs uÅ¼ytkownika (UI) powinien byÄ‡ zaprojektowany wertykalnie (Vertical UI), z jasnym podziaÅ‚em na strefy, inspirowany nowoczesnymi zestawami UI Unity.

### 2.2. Architektura Rozgrywki: System TrÃ³jcy (The Trinity System)

InnowacjÄ… "Ech Aterii" jest odejÅ›cie od sztywnego wyboru klasy na rzecz pÅ‚ynnego zarzÄ…dzania trzema aspektami. Gracz na poczÄ…tku wybiera DominujÄ…cÄ… ÅšcieÅ¼kÄ™ (Wojownik, Naukowiec lub Handlarz), co daje pasywne bonusy startowe, ale docelowo musi rozwijaÄ‡ wszystkie trzy, aby osiÄ…gnÄ…Ä‡ sukces. SÄ… one nierozerwalnie poÅ‚Ä…czone.

#### Tabela 2.1: Macierz ZaleÅ¼noÅ›ci MiÄ™dzyÅ›cieÅ¼kowych

| ÅšcieÅ¼ka Å¹rÃ³dÅ‚owa | Dostarcza do Wojownika | Dostarcza do Naukowca | Dostarcza do Handlarza |
|------------------|------------------------|-----------------------|------------------------|
| **Wojownik** | Autarkia (XP, Loot) | Trofea potworÃ³w (skÅ‚adniki badaÅ„), Ochrona laboratoriÃ³w | Ochrona szlakÃ³w handlowych (zmniejszenie ryzyka napadu), Åupy na sprzedaÅ¼ |
| **Naukowiec** | Ulepszenia broni (Enchanting), Mikstury leczÄ…ce, Automatyzacja walki | Autarkia (Punkty Wiedzy, Nowe Technologie) | Optymalizacja logistyki (pojemnoÅ›Ä‡ wozÃ³w), Przetwarzanie surowcÃ³w (WartoÅ›Ä‡ Dodana) |
| **Handlarz** | ZÅ‚oto na ekwipunek, Import rzadkich broni, Å»ywnoÅ›Ä‡ (z handlu) | Fundusze na badania, Import rzadkich odczynnikÃ³w | Autarkia (Zysk, Reputacja, Rozbudowa Sklepu) |

### 2.3. ÅšcieÅ¼ka I: Wojownik (The Warrior) â€“ Ostrze Gildii

Mechanika Wojownika opiera siÄ™ na automatycznej walce (Auto-Battler) z moÅ¼liwoÅ›ciÄ… strategicznej ingerencji poprzez "Loadouts" (zestawy ekwipunku). Wzorcem jest tu system walki z Melvor Idle, rozbudowany o elementy taktyczne z Nordicandia.

#### 2.3.1. Mechanika Walki i FormuÅ‚y Matematyczne

Walka odbywa siÄ™ w turach (tick-based). Kluczowym elementem jest determinizm z elementem losowoÅ›ci (RNG) w zakresie trafieÅ„ i unikÃ³w.

**WzÃ³r na SzansÄ™ Trafienia (Hit Chance):**

$$P(Hit) = \frac{Accuracy}{Accuracy + (TargetEvasion \times 1.25)}$$

Gdzie:
- $Accuracy$ (CelnoÅ›Ä‡) wynika z poziomu broni, statystyki Ataku oraz bonusÃ³w z mikstur Naukowca.
- $TargetEvasion$ (Unik Celu) to statystyka potwora. MnoÅ¼nik $1.25$ zapewnia, Å¼e przy rÃ³wnych statystykach szansa trafienia wynosi poniÅ¼ej 50%, wymuszajÄ…c ulepszanie sprzÄ™tu.

**Redukcja ObraÅ¼eÅ„ (Damage Reduction - DR):**

Jest to najwaÅ¼niejsza statystyka defensywna, zapoÅ¼yczona z Melvor.

$$DamageTaken = PotentialDamage \times (1 - \frac{DR}{100})$$

Maksymalne DR powinno byÄ‡ ograniczone (np. do 95%), aby uniknÄ…Ä‡ nieÅ›miertelnoÅ›ci.

**System Soft/Hard Caps dla Statystyk:**

| Statystyka | Soft Cap | Hard Cap | Efekt po Soft Cap |
|------------|----------|----------|-------------------|
| Damage Reduction | 80% | 95% | 50% efektywnoÅ›ci bonusÃ³w |
| Critical Chance | 50% | 75% | 25% efektywnoÅ›ci |
| Attack Speed | +100% | +200% | Diminishing returns |
| Evasion | 60% | 80% | 50% efektywnoÅ›ci |

**FormuÅ‚a Diminishing Returns:**

$$EffectiveBonus = SoftCap + (RawBonus - SoftCap) \times \frac{1}{1 + \frac{RawBonus - SoftCap}{ScaleFactor}}$$

Gdzie $ScaleFactor$ kontroluje jak szybko bonus maleje (typowo 50-100).

#### 2.3.2. System Slayer i Biomy

Wzorem Melvor i RuneScape, wprowadzamy umiejÄ™tnoÅ›Ä‡ Slayer (Pogromca).

- **Mechanizm**: Gracz otrzymuje zlecenie na zabicie X potworÃ³w okreÅ›lonego typu.
- **Nagroda**: "Slayer Coins" â€“ waluta pozwalajÄ…ca kupiÄ‡ specjalistyczny ekwipunek (np. buty pozwalajÄ…ce wejÅ›Ä‡ na bagna bez otrzymywania obraÅ¼eÅ„ od trucizny).
- **Biomy**: KaÅ¼dy obszar (Las, Pustynia, Wulkan) nakÅ‚ada na Wojownika pasywne debuffy (np. "UpaÅ‚: -20% HP co turÄ™"). Aby je zniwelowaÄ‡, Wojownik potrzebuje mikstur (od Naukowca) lub specjalnych ubraÅ„ (od Handlarza/Craftingu).

#### 2.3.3. Dungeony i Klucze

Lochy (Dungeons) sÄ… testem ostatecznym. Aby wejÅ›Ä‡ do lochu, gracz potrzebuje Klucza, ktÃ³ry jest wytwarzany przez Naukowca lub kupowany u Handlarza. To mechanizm "bramkujÄ…cy" (gating), zapobiegajÄ…cy zbyt szybkiemu postÄ™powi i wymuszajÄ…cy interakcjÄ™ z innymi Å›cieÅ¼kami.

#### 2.3.4. System Åšmierci i Regeneracji

**ÅšmierÄ‡ Wojownika:**

Gdy HP Wojownika spadnie do 0, nastÄ™puje **OdwrÃ³t** (Retreat), a nie permanentna Å›mierÄ‡:

| Konsekwencja | Opis |
|--------------|------|
| **Utrata ÅupÃ³w** | 50% Å‚upÃ³w z aktualnej wyprawy przepada |
| **Czas Rekonwalescencji** | Wojownik jest niedostÄ™pny przez $T_{recovery} = 60s \times DungeonTier$ |
| **ZuÅ¼ycie Jedzenia** | Dodatkowe zuÅ¼ycie zapasÃ³w na leczenie ran |
| **Brak utraty XP** | DoÅ›wiadczenie pozostaje nienaruszone |

**FormuÅ‚a Rekonwalescencji:**

$$T_{recovery} = BaseRecovery \times (1 - HealingBonus_{Scientist}) \times DungeonTier$$

Gdzie $HealingBonus_{Scientist}$ to bonus z badaÅ„ medycznych (max 50% redukcji).

**System Regeneracji HP:**

HP regeneruje siÄ™ poprzez trzy mechanizmy:

1. **Pasywna Regeneracja**: $HPRegen = BaseRegen \times (1 + VitalityBonus)$ â€“ bardzo wolna (1% HP/min bazowo)
2. **Jedzenie (Food)**: Konsumowane automatycznie podczas walki. Jedzenie pochodzi z:
   - Handlarza (import/zakup)
   - ÅupÃ³w z potworÃ³w (miÄ™so, owoce)
   - Rolnictwa Naukowca (pÃ³Åºna gra)
3. **Mikstury LeczÄ…ce**: Jednorazowe uÅ¼ycie, przywracajÄ… % HP. Produkowane przez Naukowca.

**Priorytet ZuÅ¼ycia:**
```
1. Mikstury (jeÅ›li HP < 30% i dostÄ™pne)
2. Jedzenie (automatycznie w walce)
3. Pasywna regeneracja (poza walkÄ…)
```

#### 2.3.5. System Slayer Coins - Integracja Ekonomiczna

Slayer Coins (SC) nie sÄ… izolowanÄ… walutÄ…. Wprowadzamy **GieÅ‚dÄ™ ÅowcÃ³w** (Slayer Exchange):

| Transakcja | Kurs | Limit Dzienny |
|------------|------|---------------|
| SC â†’ ZÅ‚oto | 1 SC = 100 Gold Ã— $M_{reputation}$ | 500 SC/dzieÅ„ |
| ZÅ‚oto â†’ SC | 500 Gold = 1 SC | 100 SC/dzieÅ„ |
| SC â†’ Rare Materials | Zmienny (aukcje) | Bez limitu |

Gdzie $M_{reputation}$ to mnoÅ¼nik reputacji Handlarza (1.0 - 2.0).

**Synergia z Handlarzem:**
- Handlarz moÅ¼e spekulowaÄ‡ na Slayer Coins
- Wysokopoziomowi klienci sklepu mogÄ… pÅ‚aciÄ‡ w SC za unikalne przedmioty

### 2.4. ÅšcieÅ¼ka II: Naukowiec (The Scientist) â€“ UmysÅ‚ Gildii

Naukowiec peÅ‚ni rolÄ™ silnika progresji. Jego mechaniki opierajÄ… siÄ™ na drzewkach technologicznych, eksperymentach i automatyzacji. InspiracjÄ… jest Idle Research oraz Magic Research 2.

#### 2.4.1. System BadaÅ„ i Drzewo Technologiczne

Badania nie sÄ… liniowe. WykorzystujÄ… system Flask Dependency (ZaleÅ¼noÅ›Ä‡ Kolb).

- **Red Flasks (Podstawowe)**: Generowane manualnie lub przez proste automaty. SÅ‚uÅ¼Ä… do badaÅ„ podstawowych (Lepsze Miecze).
- **Green Flasks (Zaawansowane)**: WymagajÄ… Red Flasks + ZiÃ³Å‚ (od Handlarza/Wojownika). SÅ‚uÅ¼Ä… do badaÅ„ biologicznych.
- **Blue Flasks (Magiczne)**: WymagajÄ… Green Flasks + Esencji Magicznej (Loot z bossÃ³w).

**FormuÅ‚a Kosztu BadaÅ„ (Ulepszona):**

Koszt kolejnego poziomu badania roÅ›nie wykÅ‚adniczo, ale z mechanizmem **Soft Cap** zapobiegajÄ…cym nieosiÄ…galnoÅ›ci:

$$Cost_{Level} = BaseCost \times (CostMultiplier)^{EffectiveLevel}$$

Gdzie:
$$EffectiveLevel = Level \quad \text{dla } Level \leq SoftCapLevel$$
$$EffectiveLevel = SoftCapLevel + \sqrt{Level - SoftCapLevel} \quad \text{dla } Level > SoftCapLevel$$

**Parametry Balansowe:**

| Parametr | WartoÅ›Ä‡ | Uzasadnienie |
|----------|---------|--------------|
| $BaseCost$ | 10 | Niski prÃ³g wejÅ›cia |
| $CostMultiplier$ | 1.15 | Åagodniejszy wzrost niÅ¼ 1.25 |
| $SoftCapLevel$ | 25 | Po tym poziomie wzrost spowalnia |
| $HardCapLevel$ | 100 | Maksymalny poziom (dla balansu) |

**PrzykÅ‚ad Skalowania:**

| Level | Koszt (stary 1.25^L) | Koszt (nowy z soft cap) | RÃ³Å¼nica |
|-------|---------------------|------------------------|---------|
| 10 | 93 | 40 | -57% |
| 25 | 264,697 | 329 | -99.9% |
| 50 | 70,064,923,216 | 1,083 | -99.99% |

To pozwala na sensownÄ… progresjÄ™ bez "paywall" czasowego.

#### 2.4.2. Alchemia i Eksperymenty (Discovery)

Zamiast kupowaÄ‡ gotowe receptury, gracz musi je odkrywaÄ‡.

- **Mechanika**: Gracz posiada siatkÄ™ skÅ‚adnikÃ³w (Grid). ÅÄ…czenie "Korzenia Mandragory" z "WodÄ… Å¹rÃ³dlanÄ…" moÅ¼e daÄ‡ "MiksturÄ™ Å»ycia" lub "Toksyczny Szlam" (odpad).
- **Synergia**: Odkryte mikstury sÄ… automatycznie produkowane przez laboratorium.

**System Dystrybucji Mikstur (Potion Allocation):**

Gracz ustawia priorytety dla kaÅ¼dego typu mikstury poprzez suwak podziaÅ‚u:

```
[Mikstura Å»ycia]
Wojownik: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80%  |  Sklep: â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 20%

[Mikstura SiÅ‚y]
Wojownik: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 60%  |  Sklep: â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ 40%

[Mikstura PrÄ™dkoÅ›ci]  
Wojownik: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%   |  Sklep: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
```

**Logika Priorytetu:**
1. Produkcja trafia do wspÃ³lnego magazynu Naukowca
2. Co tick, system rozdziela mikstury wedÅ‚ug ustawionych proporcji
3. Wojownik pobiera z przydzielonej puli automatycznie
4. Reszta trafia do Sklepu Handlarza
5. Gracz moÅ¼e ustawiÄ‡ "Minimum dla Wojownika" - iloÅ›Ä‡ rezerwowa

**Tryby Dystrybucji:**
- **Zbalansowany**: DomyÅ›lny, wedÅ‚ug suwakÃ³w
- **Priorytet Wojny**: 100% do Wojownika, gdy HP < 50%
- **Priorytet Zysku**: 100% do Sklepu, gdy cena > 150% normy

#### 2.4.3. Automatyzacja (Golemancja)

Naukowiec konstruuje Golemy. Golemy to jednostki "Idle", ktÃ³re wykonujÄ… proste czynnoÅ›ci za gracza:

- **Mining Golem**: Kopie rudÄ™ (zastÄ™puje klikanie).
- **Hauling Golem**: Przenosi towary z magazynu Naukowca do Sklepu Handlarza.
- **Combat Golem**: MoÅ¼e towarzyszyÄ‡ Wojownikowi jako wsparcie (Support Unit).

**System TrwaÅ‚oÅ›ci GolemÃ³w:**

Golemy majÄ… parametr **Integrity** (IntegralnoÅ›Ä‡), ktÃ³ry spada podczas uÅ¼ytkowania:

| Typ Golema | Spadek Integrity | Koszt Naprawy |
|------------|------------------|---------------|
| Mining | -0.1%/godzinÄ™ | 10 Ore + 5 Essence |
| Hauling | -0.05%/godzinÄ™ | 5 Wood + 3 Essence |
| Combat | -1% per walka | 20 Metal + 10 Essence |

**Stany Golema:**
- **100-50% Integrity**: PeÅ‚na wydajnoÅ›Ä‡
- **50-25% Integrity**: -25% wydajnoÅ›Ä‡, ostrzeÅ¼enie wizualne
- **25-1% Integrity**: -50% wydajnoÅ›Ä‡, krytyczne ostrzeÅ¼enie
- **0% Integrity**: Golem siÄ™ dezaktywuje (nie jest zniszczony)

**Naprawa:**
- Wymaga surowcÃ³w (Metal, Wood, Essence) oraz czasu
- MoÅ¼na zleciÄ‡ naprawÄ™ w Warsztacie (budynek od Handlarza)
- Badanie "Auto-Repair" (pÃ³Åºna gra) pozwala na automatycznÄ… naprawÄ™ przy >50% Integrity

### 2.5. ÅšcieÅ¼ka III: Handlarz (The Merchant) â€“ Serce Gildii

Ekonomia w "Echach Aterii" nie sÅ‚uÅ¼y tylko do kupowania ulepszeÅ„. Jest grÄ… samÄ… w sobie, inspirowanÄ… gÅ‚Ä™biÄ… Tiny Shop i systemami gieÅ‚dowymi.

#### 2.5.1. Dynamiczny Rynek i Prawo Popytu/PodaÅ¼y

Ceny towarÃ³w nie sÄ… staÅ‚e. Gra symuluje Å¼yjÄ…cy rynek za pomocÄ… uproszczonego modelu ekonomicznego.

**Algorytm Ceny Rynkowej:**

$$CurrentPrice = BasePrice \times M_{Supply} \times M_{Event} \times M_{Prestige}$$

Gdzie:
- $M_{Supply}$ (MnoÅ¼nik PodaÅ¼y): Spada, gdy gracz sprzedaje masowo ten sam towar (nasycenie rynku). Wymusza to dywersyfikacjÄ™ produkcji.
- $M_{Event}$ (MnoÅ¼nik WydarzeÅ„): Np. "Wojna na PÃ³Å‚nocy" zwiÄ™ksza cenÄ™ Mieczy o 200%.

#### 2.5.2. Szlaki Handlowe (Trade Routes)

Gracz zarzÄ…dza flotÄ… karawan.

- **Mechanika**: WybÃ³r trasy (np. Miasto A -> Miasto B). KaÅ¼da trasa ma parametry: Czas PodrÃ³Å¼y, Ryzyko Napadu, Zysk.
- **Synergia**: Ryzyko napadu jest redukowane przez poziom Wojownika (patrolowanie). PrÄ™dkoÅ›Ä‡ karawany jest zwiÄ™kszana przez technologie Naukowca (Lepsze KoÅ‚a, Magiczne Konie).
- **Wymiana Walut**: W odlegÅ‚ych miastach moÅ¼na wymieniaÄ‡ towary na rzadkie waluty (np. Faction Coins z Realm Grinder), potrzebne do specjalistycznych ulepszeÅ„.

**System NapadÃ³w (Ambush System):**

KaÅ¼da karawana ma szansÄ™ na napad, ktÃ³ra zaleÅ¼y od trasy i poziomu ochrony:

$$P(Ambush) = BaseRisk_{route} \times (1 - WarriorProtection) \times M_{cargo}$$

Gdzie:
- $BaseRisk_{route}$ = bazowe ryzyko trasy (5-30%)
- $WarriorProtection$ = bonus z poziomu Wojownika (max 80% redukcji)
- $M_{cargo}$ = mnoÅ¼nik za wartoÅ›Ä‡ Å‚adunku (1.0 - 1.5 dla cennych towarÃ³w)

**Konsekwencje Napadu:**

| Wynik Napadu | Szansa | Skutek |
|--------------|--------|--------|
| **Ucieczka** | 40% | Utrata 20% towaru, karawana wraca |
| **Rabunek** | 35% | Utrata 60% towaru, karawana kontynuuje |
| **PeÅ‚na Strata** | 20% | Utrata 100% towaru i wozu |
| **Obrona** | 5% + WarriorBonus | Brak strat, bonus XP dla straÅ¼nikÃ³w |

**Ubezpieczenie Karawan:**
- Handlarz moÅ¼e wykupiÄ‡ polisÄ™ (koszt = 10% wartoÅ›ci Å‚adunku)
- Polisa zwraca 70% wartoÅ›ci w przypadku napadu
- Wymaga poziomu Reputacji 3+

#### 2.5.3. Dynamika Cen Rynkowych (Market Recovery)

Ceny na rynku nie pozostajÄ… sztucznie zaniÅ¼one/zawyÅ¼one na zawsze.

**Algorytm Powrotu do RÃ³wnowagi:**

$$Price_{next} = Price_{current} + (BasePrice - Price_{current}) \times RecoveryRate$$

Gdzie $RecoveryRate$ zaleÅ¼y od typu towaru:

| Kategoria | Recovery Rate | Czas do 90% normy |
|-----------|---------------|-------------------|
| Surowce podstawowe | 10%/godzinÄ™ | ~22 godziny |
| Towary przetworzone | 5%/godzinÄ™ | ~44 godziny |
| Towary luksusowe | 2%/godzinÄ™ | ~115 godzin |
| Artefakty | 0.5%/godzinÄ™ | ~460 godzin |

**SygnaÅ‚y Rynkowe dla Gracza:**
- StrzaÅ‚ka â†‘/â†“ przy cenie pokazuje trend
- Kolor: Zielony (dobra cena sprzedaÅ¼y), Czerwony (zÅ‚a cena)
- Tooltip z przewidywanym czasem powrotu do normy

#### 2.5.3. ZarzÄ…dzanie Sklepem (Shopkeeping)

Gracz posiada fizyczny sklep w grze, ktÃ³ry odwiedzajÄ… NPC.

- **Dekoracje**: Meble dajÄ… pasywne bonusy. "Mahoniowa Lada" zwiÄ™ksza cierpliwoÅ›Ä‡ klientÃ³w. "Magiczny Å»yrandol" przyciÄ…ga bogatszych klientÃ³w (Wieloryby/SzlachcicÃ³w).
- **Haggle (Targowanie)**: Prosta minigra (np. pasek z suwakiem), pozwalajÄ…ca sprzedaÄ‡ przedmiot droÅ¼ej. Szansa sukcesu zaleÅ¼y od umiejÄ™tnoÅ›ci Charyzmy Handlarza.

### 2.6. Metagame: PrestiÅ¼ i System Dziedzictwa

Zamiast prostego resetu ("Prestige"), gra wykorzystuje system "Emerytury" (Retirement) znany z Magic Research 2.

#### 2.6.1. Koncepcja Dziedzictwa

- **Koncepcja**: Gracz koÅ„czy kadencjÄ™ obecnego Mistrza Gildii.
- **Legacy Points (LP)**: Punkty otrzymywane za sumaryczny postÄ™p.
- **Wydawanie PunktÃ³w**: Punkty Dziedzictwa wydaje siÄ™ na trwaÅ‚e ulepszenia.
- **Odblokowanie FabuÅ‚y**: KaÅ¼da kolejna "kadencja" popycha do przodu historiÄ™ Å›wiata.

#### 2.6.2. FormuÅ‚a Legacy Points

$$LP = \sum_{i} Level_i \times Weight_i + Discoveries \times 10 + Wealth_{tier}$$

| Å¹rÃ³dÅ‚o | Waga | PrzykÅ‚ad |
|--------|------|----------|
| Poziom Wojownika | 2.0 | Lvl 50 = 100 LP |
| Poziom Naukowca | 2.0 | Lvl 50 = 100 LP |
| Poziom Handlarza | 2.0 | Lvl 50 = 100 LP |
| Odkryte Receptury | 10 | 20 receptur = 200 LP |
| UkoÅ„czone Dungeony | 25 | 5 dungeonÃ³w = 125 LP |
| Tier MajÄ…tku | Progowy | 1M Gold = 50 LP |

#### 2.6.3. Bramki PrestiÅ¼u (Prestige Gates)

Gracz **nie moÅ¼e** wykonaÄ‡ Emerytury w dowolnym momencie. System wprowadza bramki:

**Wymagania Minimalne (OR logic - wystarczy jedno):**

| Bramka | Warunek | Sugerowany Czas |
|--------|---------|-----------------|
| **Dungeon Master** | UkoÅ„cz Dungeon Tier 3 | ~15-20h gry |
| **Trading Empire** | OsiÄ…gnij 500,000 Gold | ~12-18h gry |
| **Scientific Breakthrough** | Odblokuj Blue Flasks | ~18-25h gry |
| **Trinity Balance** | Wszystkie Å›cieÅ¼ki lvl 30+ | ~20-30h gry |

**Komunikacja z Graczem:**
- Pasek postÄ™pu "GotowoÅ›Ä‡ do Emerytury" widoczny od poczÄ…tku gry
- Tooltip wyjaÅ›niajÄ…cy korzyÅ›ci z czekania vs prestiÅ¼u teraz
- PorÃ³wnanie: "Teraz: 150 LP | Przy ukoÅ„czeniu bieÅ¼Ä…cego celu: ~280 LP"

#### 2.6.4. Drzewko Dziedzictwa (Legacy Tree)

Punkty LP wydaje siÄ™ w drzewku z trzema gaÅ‚Ä™ziami:

```
                    [START]
                       |
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼              â–¼              â–¼
   [WOJOWNIK]     [NAUKOWIEC]    [HANDLARZ]
   +10% XP (10)   +10% Research   +10% Gold
        |         Speed (10)      (10)
        â–¼              â–¼              â–¼
   +5% Damage     Start with      +1 Caravan
   (25)           Red Flasks      Slot (25)
        |         (25)                |
        â–¼              â–¼              â–¼
   Auto-Heal      +1 Golem        Market
   Threshold      Slot (50)       Insight
   (50)                           (50)
        |              |              |
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â–¼
               [UNIVERSAL]
               +5% All Stats (100)
                       |
               Unlock New Region (200)
                       |
               Prestige Multiplier x1.5 (500)
```

#### 2.6.5. Kiedy PrestiÅ¼owaÄ‡? (Strategia)

**Wczesny PrestiÅ¼ (First Prestige):**
- Cel: OdblokowaÄ‡ podstawowe ulepszenia (+10% XP)
- Optymalny moment: Pierwsza ukoÅ„czona bramka
- Oczekiwane LP: 100-200

**Optymalizacja:**
- JeÅ›li postÄ™p spowolniÅ‚ (< 1 level/godzinÄ™), rozwaÅ¼ prestiÅ¼
- JeÅ›li blisko bramki (>80%), dokoÅ„cz jÄ…
- Kalkulator in-game pokazuje "LP/godzinÄ™" dla optymalnego momentu

---

## CzÄ™Å›Ä‡ III: Aspekty Techniczne i Implementacja (Vue 3 / Nuxt)

### 3.1. WybÃ³r Technologii: Web-First Approach

Po analizie wymagaÅ„ projektowych, rekomendowanym podejÅ›ciem jest **Web-First** z uÅ¼yciem Vue 3 i Nuxt.js.

#### 3.1.1. Uzasadnienie Wyboru Technologii

| Aspekt | Web (Vue/Nuxt) | Unity | Werdykt |
|--------|----------------|-------|---------|
| **Time-to-Market** | Szybki (hot-reload, znajomoÅ›Ä‡ ekosystemu) | Wolniejszy (kompilacja, nauka C#) | Web: Szybsza iteracja |
| **Dystrybucja** | Natychmiastowa (URL), brak instalacji | App Store/Steam (review process) | Web: Zerowy koszt wejÅ›cia |
| **Cross-Platform** | PWA + Electron/Tauri + Capacitor | Osobne buildy | Web: Jeden codebase |
| **SEO/Marketing** | MoÅ¼liwe (SSR, landing page) | NiemoÅ¼liwe | Web: Organiczny ruch |
| **Monetyzacja Web** | Stripe, PayPal, natywne | Ograniczona | Web: Brak prowizji 30% |
| **Late-Game Portowanie** | Electron (Steam), Capacitor (Mobile) | Native | Wykonalne |

#### 3.1.2. Stack Technologiczny

```
Frontend:
â”œâ”€â”€ Vue 3 (Composition API, <script setup>)
â”œâ”€â”€ Nuxt.js 3 (SSR/SSG, routing, middleware)
â”œâ”€â”€ Vuetify 3 (Material Design, komponenty UI)
â”œâ”€â”€ TypeScript (type safety)
â””â”€â”€ Pinia (state management)

Persystencja:
â”œâ”€â”€ IndexedDB (via Dexie.js) - lokalny zapis gry
â”œâ”€â”€ LocalStorage - szybkie ustawienia
â””â”€â”€ Cloud Sync (opcjonalnie) - Supabase/Firebase

Offline:
â”œâ”€â”€ Service Workers (Workbox)
â”œâ”€â”€ PWA Manifest
â””â”€â”€ Background Sync API

Portowanie:
â”œâ”€â”€ Electron / Tauri â†’ Steam (PC/Mac/Linux)
â”œâ”€â”€ Capacitor â†’ Android/iOS
â””â”€â”€ PWA â†’ Instalowalna aplikacja webowa
```

### 3.2. Architektura Aplikacji (Feature-Sliced Design)

Projekt wykorzystuje architekturÄ™ FSD (Feature-Sliced Design) dla skalowalnoÅ›ci i czytelnoÅ›ci kodu.

```
app/
â”œâ”€â”€ pages/                    # Routing (Nuxt)
â”‚   â””â”€â”€ ateria-idle/
â”‚       â””â”€â”€ index.vue         # GÅ‚Ã³wny widok gry
â”‚
â”œâ”€â”€ features/                 # FunkcjonalnoÅ›ci biznesowe
â”‚   â””â”€â”€ ateria-idle/
â”‚       â”œâ”€â”€ warrior/          # ÅšcieÅ¼ka Wojownika
â”‚       â”‚   â”œâ”€â”€ ui/
â”‚       â”‚   â”‚   â”œâ”€â”€ WarriorPanel.vue
â”‚       â”‚   â”‚   â”œâ”€â”€ CombatView.vue
â”‚       â”‚   â”‚   â””â”€â”€ SlayerBoard.vue
â”‚       â”‚   â”œâ”€â”€ hooks/
â”‚       â”‚   â”‚   â”œâ”€â”€ useCombat.ts
â”‚       â”‚   â”‚   â””â”€â”€ useSlayer.ts
â”‚       â”‚   â””â”€â”€ model/
â”‚       â”‚       â””â”€â”€ warrior.store.ts
â”‚       â”‚
â”‚       â”œâ”€â”€ scientist/        # ÅšcieÅ¼ka Naukowca
â”‚       â”‚   â”œâ”€â”€ ui/
â”‚       â”‚   â”‚   â”œâ”€â”€ ScientistPanel.vue
â”‚       â”‚   â”‚   â”œâ”€â”€ ResearchTree.vue
â”‚       â”‚   â”‚   â””â”€â”€ AlchemyGrid.vue
â”‚       â”‚   â”œâ”€â”€ hooks/
â”‚       â”‚   â”‚   â”œâ”€â”€ useResearch.ts
â”‚       â”‚   â”‚   â””â”€â”€ useAlchemy.ts
â”‚       â”‚   â””â”€â”€ model/
â”‚       â”‚       â””â”€â”€ scientist.store.ts
â”‚       â”‚
â”‚       â”œâ”€â”€ merchant/         # ÅšcieÅ¼ka Handlarza
â”‚       â”‚   â”œâ”€â”€ ui/
â”‚       â”‚   â”‚   â”œâ”€â”€ MerchantPanel.vue
â”‚       â”‚   â”‚   â”œâ”€â”€ ShopView.vue
â”‚       â”‚   â”‚   â””â”€â”€ TradeRoutes.vue
â”‚       â”‚   â”œâ”€â”€ hooks/
â”‚       â”‚   â”‚   â”œâ”€â”€ useMarket.ts
â”‚       â”‚   â”‚   â””â”€â”€ useTradeRoutes.ts
â”‚       â”‚   â””â”€â”€ model/
â”‚       â”‚       â””â”€â”€ merchant.store.ts
â”‚       â”‚
â”‚       â”œâ”€â”€ core/             # RdzeÅ„ gry
â”‚       â”‚   â”œâ”€â”€ ui/
â”‚       â”‚   â”‚   â”œâ”€â”€ GameHeader.vue
â”‚       â”‚   â”‚   â”œâ”€â”€ ResourceBar.vue
â”‚       â”‚   â”‚   â””â”€â”€ PrestigeModal.vue
â”‚       â”‚   â”œâ”€â”€ hooks/
â”‚       â”‚   â”‚   â”œâ”€â”€ useGameLoop.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ useOfflineProgress.ts
â”‚       â”‚   â”‚   â””â”€â”€ useSaveLoad.ts
â”‚       â”‚   â””â”€â”€ model/
â”‚       â”‚       â”œâ”€â”€ game.store.ts
â”‚       â”‚       â””â”€â”€ prestige.store.ts
â”‚       â”‚
â”‚       â””â”€â”€ shared/           # WspÃ³Å‚dzielone elementy gry
â”‚           â”œâ”€â”€ ui/
â”‚           â”‚   â”œâ”€â”€ ProgressBar.vue
â”‚           â”‚   â”œâ”€â”€ ResourceIcon.vue
â”‚           â”‚   â””â”€â”€ BigNumber.vue
â”‚           â””â”€â”€ lib/
â”‚               â”œâ”€â”€ bigNumber.ts      # ObsÅ‚uga duÅ¼ych liczb
â”‚               â”œâ”€â”€ formulas.ts       # FormuÅ‚y matematyczne
â”‚               â””â”€â”€ lootTables.ts     # Tabele Å‚upÃ³w
â”‚
â”œâ”€â”€ entities/                 # Encje biznesowe
â”‚   â””â”€â”€ ateria-idle/
â”‚       â”œâ”€â”€ item/
â”‚       â”‚   â””â”€â”€ item.types.ts
â”‚       â”œâ”€â”€ monster/
â”‚       â”‚   â””â”€â”€ monster.types.ts
â”‚       â”œâ”€â”€ research/
â”‚       â”‚   â””â”€â”€ research.types.ts
â”‚       â””â”€â”€ trade-route/
â”‚           â””â”€â”€ tradeRoute.types.ts
â”‚
â””â”€â”€ shared/                   # Globalne narzÄ™dzia
    â”œâ”€â”€ ui/
    â”‚   â””â”€â”€ ...
    â””â”€â”€ lib/
        â””â”€â”€ ...
```

### 3.3. System PÄ™tli Gry (Game Loop)

#### 3.3.1. Implementacja Tick-Based Loop

```typescript
// hooks/useGameLoop.ts
const TICK_RATE = 1000 / 10; // 10 ticks per second

export function useGameLoop() {
  const gameStore = useGameStore();
  const warriorStore = useWarriorStore();
  const scientistStore = useScientistStore();
  const merchantStore = useMerchantStore();
  
  let lastTick = performance.now();
  let animationFrameId: number;
  
  function tick(currentTime: number) {
    const deltaTime = currentTime - lastTick;
    
    if (deltaTime >= TICK_RATE) {
      const ticks = Math.floor(deltaTime / TICK_RATE);
      
      // Update all systems
      warriorStore.processCombatTicks(ticks);
      scientistStore.processResearchTicks(ticks);
      merchantStore.processMarketTicks(ticks);
      
      // Auto-save every 30 seconds
      if (gameStore.tickCount % 300 === 0) {
        gameStore.saveGame();
      }
      
      lastTick = currentTime - (deltaTime % TICK_RATE);
      gameStore.tickCount += ticks;
    }
    
    animationFrameId = requestAnimationFrame(tick);
  }
  
  onMounted(() => {
    animationFrameId = requestAnimationFrame(tick);
  });
  
  onUnmounted(() => {
    cancelAnimationFrame(animationFrameId);
  });
}
```

### 3.4. Data-Driven Design

Wszystkie definicje gry przechowywane sÄ… w plikach JSON/TypeScript, co pozwala na:

- Åatwy balans bez zmiany logiki
- Potencjalne wsparcie dla modÃ³w
- Generowanie typÃ³w TypeScript

```typescript
// data/monsters.ts
export const MONSTERS: Record<string, MonsterDefinition> = {
  goblin: {
    id: 'goblin',
    name: 'Goblin',
    hp: 50,
    attack: 5,
    defense: 2,
    evasion: 10,
    lootTable: [
      { itemId: 'gold', chance: 1.0, min: 5, max: 15 },
      { itemId: 'goblin_ear', chance: 0.3, min: 1, max: 1 },
    ],
    biome: 'forest',
    slayerRequirement: null,
  },
  // ...
};
```

### 3.5. Symulacja Offline (Offline Progress)

Symulacja offline jest krytyczna dla gier idle. Implementacja wykorzystuje model probabilistyczny:

```typescript
// hooks/useOfflineProgress.ts
export function calculateOfflineProgress(
  lastLogout: number, 
  currentTime: number,
  maxOfflineHours: number = 24
): OfflineReport {
  const deltaMs = Math.min(
    currentTime - lastLogout,
    maxOfflineHours * 60 * 60 * 1000
  );
  
  const deltaTicks = Math.floor(deltaMs / TICK_RATE);
  
  // Symulacja probabilistyczna zamiast tick-by-tick
  const combatResults = simulateCombat(deltaTicks, warriorState);
  const researchResults = simulateResearch(deltaTicks, scientistState);
  const merchantResults = simulateMerchant(deltaTicks, merchantState);
  
  return {
    timeAway: deltaMs,
    combat: combatResults,
    research: researchResults,
    merchant: merchantResults,
  };
}
```

### 3.6. System Zapisu Gry

#### 3.6.1. Lokalny Zapis (IndexedDB)

```typescript
// lib/saveSystem.ts
import Dexie from 'dexie';

class AteriaDatabase extends Dexie {
  saves!: Dexie.Table<GameSave, string>;
  
  constructor() {
    super('AteriaIdleDB');
    this.version(1).stores({
      saves: 'id, timestamp, version',
    });
  }
}

export const db = new AteriaDatabase();

export async function saveGame(state: GameState): Promise<void> {
  await db.saves.put({
    id: 'main',
    timestamp: Date.now(),
    version: SAVE_VERSION,
    data: compressState(state),
  });
}

export async function loadGame(): Promise<GameState | null> {
  const save = await db.saves.get('main');
  if (!save) return null;
  
  return migrateState(decompressState(save.data), save.version);
}
```

### 3.7. Strategia Portowania

#### Faza 1: Web (PWA)
- PeÅ‚na funkcjonalnoÅ›Ä‡ w przeglÄ…darce
- Instalowalna jako PWA
- Offline support via Service Workers

#### Faza 2: Steam (Electron/Tauri)
```bash
# Tauri (rekomendowane - mniejszy rozmiar)
npm install -D @tauri-apps/cli
npx tauri init
npx tauri build
```
- Integracja ze Steam API (osiÄ…gniÄ™cia, cloud save)
- Brak opÅ‚at App Store (tylko $100 jednorazowo Steam)

#### Faza 3: Mobile (Capacitor)
```bash
npm install @capacitor/core @capacitor/cli
npx cap init
npx cap add android
npx cap add ios
```
- Responsywny UI (juÅ¼ przygotowany w Vuetify)
- Push notifications (Capacitor Push)
- In-App Purchases (opcjonalnie)

---

## CzÄ™Å›Ä‡ IV: Systemy Wsparcia Gracza (UX/Onboarding)

### 4.1. System Tutoriala (Onboarding)

Tutorial musi byÄ‡ **nienachalny** i **kontekstowy**. Gracze idle games nie lubiÄ… dÅ‚ugich wprowadzeÅ„.

#### 4.1.1. Struktura Onboardingu

**Faza 1: Pierwsze 5 minut (Guided)**
```
1. [Automatyczne] WyÅ›wietl krÃ³tki prolog (2-3 zdania)
2. [Highlight] PodÅ›wietl panel Wojownika
3. [Action] "Kliknij, aby wysÅ‚aÄ‡ wojownika do lasu"
4. [Wait] Poczekaj na pierwszÄ… walkÄ™ (10s)
5. [Reward] PokaÅ¼ Å‚upy z animacjÄ…
6. [Unlock] Odblokuj panel Naukowca
```

**Faza 2: Pierwsze 30 minut (Hints)**
- Tooltips pojawiajÄ… siÄ™ przy nowych elementach
- PulsujÄ…ce ikony wskazujÄ… nieodkryte funkcje
- "WskazÃ³wka dnia" przy pierwszym logowaniu

**Faza 3: GÅ‚Ä™bokie mechaniki (Kodeks)**
- Odblokowany Kodeks (Encyclopedia) z peÅ‚nÄ… dokumentacjÄ…
- KaÅ¼da mechanika ma stronÄ™ "Jak to dziaÅ‚a?"
- Linki kontekstowe z interfejsu do Kodeksu

#### 4.1.2. System WskazÃ³wek (Hint System)

```typescript
interface Hint {
  id: string;
  trigger: HintTrigger;
  message: string;
  priority: 'low' | 'medium' | 'high';
  dismissable: boolean;
}

// PrzykÅ‚ady triggerÃ³w
const hints: Hint[] = [
  {
    id: 'low_food',
    trigger: { type: 'resource_below', resource: 'food', threshold: 10 },
    message: 'TwÃ³j wojownik jest gÅ‚odny! Kup jedzenie u Handlarza.',
    priority: 'high',
    dismissable: false,
  },
  {
    id: 'idle_gold',
    trigger: { type: 'resource_above', resource: 'gold', threshold: 10000 },
    message: 'Masz duÅ¼o zÅ‚ota! RozwaÅ¼ ulepszenie ekwipunku lub inwestycjÄ™ w badania.',
    priority: 'low',
    dismissable: true,
  },
];
```

### 4.2. Architektura UI/UX

#### 4.2.1. Layout GÅ‚Ã³wny (Desktop)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo]    [Resources Bar]              [Settings] [Save]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         â”‚                                                   â”‚
â”‚  NAV    â”‚              MAIN CONTENT AREA                   â”‚
â”‚         â”‚                                                   â”‚
â”‚ â—‹ Gildiaâ”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â— Wojow â”‚   â”‚   COMBAT    â”‚   INFO      â”‚  INVENTORY  â”‚    â”‚
â”‚ â—‹ Nauko â”‚   â”‚   VIEW      â”‚   PANEL     â”‚             â”‚    â”‚
â”‚ â—‹ Handl â”‚   â”‚             â”‚             â”‚             â”‚    â”‚
â”‚ â—‹ Mapy  â”‚   â”‚  [Enemy]    â”‚  Stats      â”‚  [Items]    â”‚    â”‚
â”‚ â—‹ Kodeksâ”‚   â”‚  HP â–ˆâ–ˆâ–ˆâ–ˆâ–‘   â”‚  DPS: 150   â”‚             â”‚    â”‚
â”‚         â”‚   â”‚             â”‚  Kills: 42  â”‚             â”‚    â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€ â”‚   â”‚  [Warrior]  â”‚             â”‚             â”‚    â”‚
â”‚ â—‹ PrestiÅ¼   â”‚  HP â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â”‚             â”‚             â”‚    â”‚
â”‚ â—‹ Opcje â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                                                   â”‚
â”‚         â”‚   [Action Bar: Auto-fight ON | Select Area â–¼]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.2.2. Layout Mobilny (Responsive)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â‰¡] Ateria  âš™ï¸ ğŸ’¾  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ’° 12.5K | ğŸ– 45   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    â”‚
â”‚    MAIN CONTENT    â”‚
â”‚    (Swipeable)     â”‚
â”‚                    â”‚
â”‚   â† Combat View â†’  â”‚
â”‚                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [âš”ï¸] [ğŸ”¬] [ğŸ’¼] [ğŸ“–]â”‚
â”‚  Nav    Nav   Nav  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.2.3. Vuetify Components Mapping

| Element Gry | Komponent Vuetify | Customizacja |
|-------------|-------------------|--------------|
| Resource Bar | `v-app-bar` + `v-chip` | Custom icons, animated counters |
| Navigation | `v-navigation-drawer` | Collapsible, icons |
| Combat View | `v-card` + custom canvas | Animacje walki |
| Progress Bars | `v-progress-linear` | Gradient colors |
| Inventory | `v-data-table` / `v-virtual-scroll` | Drag & drop |
| Modals | `v-dialog` | Prestige, Shop |
| Tooltips | `v-tooltip` | Rich content |
| Notifications | `v-snackbar` | Toast messages |

### 4.3. System OsiÄ…gniÄ™Ä‡ (Achievements)

#### 4.3.1. Kategorie OsiÄ…gniÄ™Ä‡

| Kategoria | PrzykÅ‚ady | Nagroda |
|-----------|-----------|---------|
| **Progresja** | "Poziom 10 Wojownika", "Pierwszy Dungeon" | TytuÅ‚ + LP Bonus |
| **Ekonomia** | "Zarobij 1M zÅ‚ota", "100 transakcji" | Skin sklepu |
| **Odkrycia** | "Odkryj 10 receptur", "Wszystkie biomy" | Punkty Kodeksu |
| **Wyzwania** | "Zabij bossa bez mikstur", "0 Å›mierci run" | Unikalne przedmioty |
| **Sekrety** | Ukryte warunki | ??? (niespodzianka) |

#### 4.3.2. Struktura Danych

```typescript
interface Achievement {
  id: string;
  name: string;
  description: string;
  category: 'progression' | 'economy' | 'discovery' | 'challenge' | 'secret';
  icon: string;
  condition: AchievementCondition;
  reward: AchievementReward;
  hidden: boolean;  // Dla sekretÃ³w
  rarity: 'common' | 'uncommon' | 'rare' | 'epic' | 'legendary';
}

interface AchievementReward {
  type: 'title' | 'lp_bonus' | 'cosmetic' | 'item' | 'permanent_buff';
  value: string | number;
}
```

### 4.4. System EventÃ³w Sezonowych

#### 4.4.1. Typy EventÃ³w

| Typ | CzÄ™stotliwoÅ›Ä‡ | Czas Trwania | PrzykÅ‚ad |
|-----|---------------|--------------|----------|
| **Festiwal** | Co 3 miesiÄ…ce | 2 tygodnie | Festiwal Å»niw (+50% loot) |
| **World Event** | Losowo | 3-7 dni | Inwazja GoblinÃ³w |
| **Weekend Bonus** | Co tydzieÅ„ | 48h | PodwÃ³jne XP |
| **Daily Challenge** | Codziennie | 24h | "Sprzedaj 500 drewna" |

#### 4.4.2. Implementacja (Feature Flags)

```typescript
// stores/events.store.ts
interface GameEvent {
  id: string;
  type: EventType;
  startDate: Date;
  endDate: Date;
  modifiers: EventModifier[];
  rewards: EventReward[];
  progress?: number;  // Dla eventÃ³w z postÄ™pem
}

export const useEventsStore = defineStore('events', () => {
  const activeEvents = computed(() => 
    allEvents.value.filter(e => 
      e.startDate <= now.value && e.endDate >= now.value
    )
  );
  
  const eventModifiers = computed(() => 
    activeEvents.value.flatMap(e => e.modifiers)
  );
  
  // Aplikowanie modyfikatorÃ³w do innych systemÃ³w
  function getModifiedValue(base: number, type: ModifierType): number {
    const mods = eventModifiers.value.filter(m => m.type === type);
    return mods.reduce((val, mod) => val * mod.multiplier, base);
  }
});
```

### 4.5. Balans Late-Game (Skalowanie NagrÃ³d)

#### 4.5.1. Problem "Wall of Grind"

W wielu grach idle postÄ™p w late-game staje siÄ™ frustrujÄ…co wolny. Aby tego uniknÄ…Ä‡, stosujemy **Reward Scaling** proporcjonalny do kosztÃ³w.

**Zasada ZÅ‚otego Ratio:**

$$\frac{RewardGrowth}{CostGrowth} \geq 0.7$$

JeÅ›li koszty rosnÄ… o 15% na poziom, nagrody muszÄ… rosnÄ…Ä‡ o minimum 10.5%.

#### 4.5.2. Krzywe Progresji

```
PostÄ™p Gracza vs Czas (idealne krzywe)
â”‚
â”‚     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â† Late Game (plateau)
â”‚   â–ˆâ–ˆ                    
â”‚  â–ˆ                       â† Mid Game (logarytmiczny)
â”‚ â–ˆ                        
â”‚â–ˆ                         â† Early Game (szybki)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> Czas
```

**Fazy Progresji:**

| Faza | Czas | Charakterystyka | Cel Designu |
|------|------|-----------------|-------------|
| **Early** | 0-5h | Szybkie odblokowania, ciÄ…gÅ‚e "Aha!" | Hook gracza |
| **Mid** | 5-30h | Stabilny postÄ™p, strategiczne wybory | Core gameplay |
| **Late** | 30-100h | Optymalizacja, prestiÅ¼, achievements | Retencja |
| **End** | 100h+ | Mastery, speedrunning, mods | SpoÅ‚ecznoÅ›Ä‡ |

#### 4.5.3. Anti-Stagnation Mechanics

Aby zapobiec "stagnacji" w late-game:

1. **Milestone Rewards**: Co 10 poziomÃ³w znaczÄ…ca nagroda (nie tylko +1% bonus)
2. **Prestige Scaling**: KaÅ¼dy prestiÅ¼ zwiÄ™ksza cap moÅ¼liwoÅ›ci o 10-20%
3. **Discovery Events**: Losowe odkrycia przyspieszajÄ…ce postÄ™p
4. **Catch-up Mechanics**: Nowe Å›cieÅ¼ki zaczynajÄ… z bonusem jeÅ›li inne sÄ… zaawansowane

**FormuÅ‚a Catch-Up:**

$$BonusXP = BaseXP \times (1 + 0.05 \times MaxOtherPathLevel)$$

Gracz z Wojownikiem lvl 50, zaczynajÄ…cy Handlarza, dostaje +250% XP do wyrÃ³wnania.

---

## CzÄ™Å›Ä‡ VI: Strategia Ekonomiczna i Monetyzacja (Model 2025)

### 6.1. "Etyczna Monetyzacja" (Fair Play Model)

Analiza sentymentu graczy wskazuje na rosnÄ…cy sprzeciw wobec modeli Pay-to-Win i "predatory monetization". "Echa Aterii" przyjmÄ… model hybrydowy, ktÃ³ry sprawdziÅ‚ siÄ™ w Melvor Idle:

- **Darmowe Demo (F2P)**: PeÅ‚ny dostÄ™p do wczesnej fazy gry (Early Game), ale zablokowane zaawansowane umiejÄ™tnoÅ›ci (np. Alchemia poziomu 3+, Szlaki Handlowe Tier 2).
- **Full Game Unlock (Premium)**: Jednorazowa opÅ‚ata (ok. $10-15 USD) odblokowujÄ…ca caÅ‚Ä… zawartoÅ›Ä‡. Brak mikropÅ‚atnoÅ›ci za "krysztaÅ‚y" czy przyspieszacze czasu.
- **Dodatki (Expansions)**: PÅ‚atne DLC wydawane co 6-12 miesiÄ™cy, dodajÄ…ce nowe krainy i mechaniki, a nie tylko "wiÄ™cej tego samego".
- **Reklamy (Opcjonalne)**: W wersji mobilnej F2P â€“ "Obejrzyj reklamÄ™, aby podwoiÄ‡ zysk offline z ostatnich 4 godzin". Nigdy nie wymuszane (interstitial).

### 6.2. Strategie Retencji (Zatrzymanie Gracza)

Retencja w grach Idle jest wysoka (Å›rednio 18% sticky factor), ale wymaga odpowiednich bodÅºcÃ³w.

- **Daily Challenges**: KrÃ³tkie cele ("Sprzedaj 500 desek"), ktÃ³re wymuszajÄ… interakcjÄ™ z rÃ³Å¼nymi mechanikami.
- **Push Notifications (Smart)**: Powiadomienia wysyÅ‚ane tylko, gdy coÅ› waÅ¼nego siÄ™ wydarzyÅ‚o ("Twoja karawana wrÃ³ciÅ‚a z Wschodnich Krain"), a nie generyczne "WrÃ³Ä‡ do gry".
- **Osada (Township)**: Mechanika budowania bazy, ktÃ³ra rozwija siÄ™ bardzo powoli (dni/tygodnie). Daje to graczowi dÅ‚ugoterminowy cel wizualny.

---

## CzÄ™Å›Ä‡ VII: Plan Produkcji i Roadmap

### 7.1. Fazy Rozwoju

**Faza Prototypu (MiesiÄ…ce 1-2):**
- Setup projektu Nuxt 3 + Vuetify + Pinia
- Implementacja "Trinity System" z podstawowym UI
- Game loop (tick system, offline progress)
- Balans matematyczny krzywych rozwoju (XP, Koszty)
- Podstawowy system zapisu (IndexedDB)

**Faza Vertical Slice (MiesiÄ…ce 3-4):**
- PeÅ‚na pÄ™tla: Walka â†’ Loot â†’ Badania â†’ Handel â†’ Lepszy Ekwipunek â†’ Walka
- Implementacja UI zgodnie z wireframes
- ResponsywnoÅ›Ä‡ (desktop + mobile)
- System tutoriala i onboardingu
- Wersja Alpha dla testerÃ³w (Discord community)

**Faza Content Production (MiesiÄ…ce 5-8):**
- Tworzenie przedmiotÃ³w, potworÃ³w, drzewek badaÅ„ (data-driven)
- Pixel Art assets (lub zakup asset packa)
- System achievementÃ³w
- Eventy sezonowe (framework)
- PWA + Service Workers

**Faza Beta (MiesiÄ…ce 9-10):**
- Open Beta na stronie www
- Zbieranie feedbacku, iteracja balansu
- Implementacja monetyzacji (Stripe)
- Cloud save (opcjonalnie)

**Faza Launch Web (MiesiÄ…c 11):**
- Premiera wersji webowej
- Marketing, landing page, SEO

**Faza Portowanie (MiesiÄ…ce 12+):**
- Steam (Electron/Tauri) - Early Access
- Mobile (Capacitor) - jeÅ›li sukces webowy

---

## Podsumowanie i Wnioski KoÅ„cowe

Analiza rynku jednoznacznie wskazuje, Å¼e w 2025 roku sukces w niszy gier Idle nie zaleÅ¼y od prostoty, lecz od zÅ‚oÅ¼onoÅ›ci systemowej podanej w przystÄ™pny sposÃ³b. Gracze oczekujÄ… szacunku dla swojego czasu, braku agresywnej monetyzacji i gÅ‚Ä™bi mechanicznej porÃ³wnywalnej z peÅ‚noprawnymi grami RPG.

Projekt "Echa Aterii" odpowiada na te potrzeby poprzez:

- **System TrÃ³jcy**: Unikalne poÅ‚Ä…czenie RPG, Strategii i Tycoona.
- **InterzaleÅ¼noÅ›Ä‡**: Wymuszenie strategicznego myÅ›lenia zamiast bezmyÅ›lnego klikania.
- **Etyczny Model Biznesowy**: Budowanie lojalnej spoÅ‚ecznoÅ›ci wokÃ³Å‚ uczciwej gry.

Realizacja tego planu, przy wykorzystaniu stacku **Vue 3 / Nuxt / Vuetify** i podejÅ›cia **Web-First**, daje wysokie prawdopodobieÅ„stwo stworzenia tytuÅ‚u o dÅ‚ugim cyklu Å¼ycia (Live Ops) i stabilnych przychodach, zdolnego konkurowaÄ‡ z gigantami takimi jak Melvor Idle.

**Kluczowe Przewagi Wybranej Technologii:**
- Szybka iteracja i deployment (web)
- Brak kosztÃ³w dystrybucji (wÅ‚asna strona)
- Åatwe portowanie na wszystkie platformy (Electron, Capacitor)
- ZnajomoÅ›Ä‡ stacku przez zespÃ³Å‚ developerski
- NiÅ¼sze koszty utrzymania niÅ¼ native apps
